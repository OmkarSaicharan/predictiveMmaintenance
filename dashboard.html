<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Predictive Maintenance | Analytics Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    :root {
      --primary-dark: #0f172a;
      --primary-light: #f8fafc;
      --primary-red: #dc2626;
      --accent-blue: #3b82f6;
      --accent-teal: #0d9488;
      --accent-amber: #f59e0b;
      --accent-green: #10b981;
      --accent-purple: #8b5cf6;
      --gray-100: #f1f5f9;
      --gray-200: #e2e8f0;
      --gray-300: #cbd5e1;
      --gray-400: #94a3b8;
      --gray-700: #334155;
      --gray-800: #1e293b;
      --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
      --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
      --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
    }
    
    body {
      background-color: var(--primary-light);
      color: var(--gray-800);
      font-family: 'Inter', sans-serif;
      line-height: 1.6;
      overflow-x: hidden;
      min-height: 100vh;
    }
    
    h1, h2, h3, h4, h5, h6 {
      font-family: 'Poppins', sans-serif;
      font-weight: 600;
      line-height: 1.3;
      color: var(--primary-dark);
    }
    
    /* Navigation */
    .navbar {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background: rgba(255, 255, 255, 0.98);
      backdrop-filter: blur(10px);
      z-index: 1000;
      padding: 1rem 0;
      box-shadow: var(--shadow-sm);
      transition: all 0.3s ease;
      border-bottom: 1px solid var(--gray-200);
    }
    
    .navbar.scrolled {
      padding: 0.75rem 0;
      box-shadow: var(--shadow-lg);
    }
    
    .nav-container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .logo {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--primary-dark);
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .logo-icon {
      color: var(--primary-red);
      font-size: 1.75rem;
    }
    
    .nav-menu {
      display: flex;
      gap: 2rem;
      list-style: none;
    }
    
    .nav-link {
      color: var(--gray-700);
      text-decoration: none;
      font-weight: 500;
      font-size: 0.95rem;
      transition: color 0.3s;
      position: relative;
      padding: 0.5rem 0;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .nav-link::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 0;
      height: 2px;
      background: var(--primary-red);
      transition: width 0.3s ease;
    }
    
    .nav-link:hover {
      color: var(--primary-red);
    }
    
    .nav-link:hover::after {
      width: 100%;
    }
    
    .mobile-menu-btn {
      display: none;
      background: none;
      border: none;
      font-size: 1.5rem;
      color: var(--primary-dark);
      cursor: pointer;
    }
    
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 2rem;
      margin-top: 5rem;
    }
    
    .header {
      margin-bottom: 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 1rem;
    }
    
    .header-content {
      flex: 1;
    }
    
    .title {
      font-size: 2rem;
      font-weight: 700;
      color: var(--primary-dark);
      margin-bottom: 0.5rem;
      background: linear-gradient(135deg, var(--primary-dark) 0%, var(--gray-700) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .subtitle {
      color: var(--gray-600);
      font-size: 1rem;
    }
    
    .header-actions {
      display: flex;
      gap: 1rem;
    }
    
    /* Filter Panel */
    .filter-panel {
      background: white;
      border-radius: 12px;
      padding: 1.25rem 2rem;
      box-shadow: var(--shadow-md);
      margin-bottom: 1.5rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1.5rem;
      flex-wrap: wrap;
      border: 1px solid var(--gray-200);
    }
    
    .filter-group {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    
    .filter-label {
      font-weight: 600;
      color: var(--gray-700);
      font-size: 0.875rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .filter-panel select {
      padding: 0.625rem 1.25rem;
      border-radius: 8px;
      border: 1px solid var(--gray-300);
      background: white;
      color: var(--gray-700);
      font-family: inherit;
      font-size: 0.875rem;
      transition: all 0.3s;
      min-width: 180px;
    }
    
    .filter-panel select:focus {
      outline: none;
      border-color: var(--primary-red);
      box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);
    }
    
    .btn {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.75rem 1.5rem;
      background: var(--primary-red);
      color: white;
      text-decoration: none;
      border-radius: 8px;
      font-weight: 500;
      font-size: 0.875rem;
      transition: all 0.3s ease;
      border: 2px solid var(--primary-red);
      box-shadow: var(--shadow-sm);
      cursor: pointer;
      font-family: inherit;
    }
    
    .btn:hover {
      background: white;
      color: var(--primary-red);
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
    }
    
    .btn-outline {
      background: transparent;
      color: var(--primary-red);
      border: 2px solid var(--primary-red);
    }
    
    .btn-outline:hover {
      background: var(--primary-red);
      color: white;
    }
    
    .btn-secondary {
      background: var(--gray-700);
      border-color: var(--gray-700);
    }
    
    .btn-secondary:hover {
      background: white;
      color: var(--gray-700);
    }
    
    /* Summary Pane */
    .summary-pane {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }
    
    .summary-item {
      background: white;
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: var(--shadow-md);
      transition: all 0.3s ease;
      border: 1px solid var(--gray-200);
      position: relative;
      overflow: hidden;
    }
    
    .summary-item:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-lg);
      border-color: var(--primary-red);
    }
    
    .summary-item::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 4px;
      background: linear-gradient(90deg, var(--primary-red), var(--accent-amber));
    }
    
    .summary-icon {
      width: 48px;
      height: 48px;
      border-radius: 10px;
      background: linear-gradient(135deg, #fecaca 0%, #fef3c7 100%);
      color: var(--primary-red);
      font-size: 1.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 1rem;
    }
    
    .summary-content {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
    }
    
    .summary-text {
      flex: 1;
    }
    
    .summary-label {
      color: var(--gray-600);
      font-size: 0.875rem;
      font-weight: 500;
      margin-bottom: 0.25rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .summary-value {
      font-size: 2rem;
      font-weight: 700;
      color: var(--primary-dark);
      margin-bottom: 0.25rem;
    }
    
    .summary-trend {
      display: flex;
      align-items: center;
      gap: 0.25rem;
      font-size: 0.875rem;
      color: var(--accent-green);
      font-weight: 500;
    }
    
    .summary-trend.down {
      color: var(--primary-red);
    }
    
    /* Dashboard Layout */
    .dashboard-grid {
      display: grid;
      grid-template-columns: 1fr 400px;
      gap: 1.5rem;
      margin-bottom: 2rem;
    }
    
    @media (max-width: 1024px) {
      .dashboard-grid {
        grid-template-columns: 1fr;
      }
    }
    
    /* Main Content */
    .main-content {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }
    
    /* Cards */
    .card-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 1.5rem;
    }
    
    .card {
      background: white;
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: var(--shadow-md);
      transition: all 0.3s ease;
      border: 1px solid var(--gray-200);
      position: relative;
      overflow: hidden;
    }
    
    .card:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-lg);
      border-color: var(--primary-red);
    }
    
    .card.alert {
      border-left: 4px solid var(--accent-amber);
      background: linear-gradient(135deg, #fff9db 0%, #ffffff 100%);
    }
    
    .card-header {
      display: flex;
      align-items: flex-start;
      gap: 1rem;
      margin-bottom: 1.25rem;
    }
    
    .card-icon {
      width: 48px;
      height: 48px;
      border-radius: 10px;
      background: linear-gradient(135deg, var(--gray-100) 0%, #ffffff 100%);
      color: var(--primary-red);
      font-size: 1.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }
    
    .card-title-section {
      flex: 1;
    }
    
    .card-title {
      font-size: 1.125rem;
      font-weight: 600;
      color: var(--primary-dark);
      margin-bottom: 0.25rem;
    }
    
    .card-subtitle {
      color: var(--gray-500);
      font-size: 0.875rem;
      margin-bottom: 0.5rem;
    }
    
    .card-badges {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }
    
    .badge {
      padding: 0.25rem 0.75rem;
      border-radius: 20px;
      font-size: 0.75rem;
      font-weight: 500;
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
    }
    
    .badge-status {
      background: var(--gray-100);
      color: var(--gray-700);
    }
    
    .badge-status.running {
      background: #d1fae5;
      color: #065f46;
    }
    
    .badge-status.idle {
      background: #fef3c7;
      color: #92400e;
    }
    
    .badge-health {
      background: #f0f9ff;
      color: var(--accent-blue);
    }
    
    .health-score {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 1rem;
    }
    
    .health-label {
      color: var(--gray-600);
      font-size: 0.875rem;
    }
    
    .health-value {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--accent-green);
    }
    
    .health-value.low {
      color: var(--primary-red);
    }
    
    .health-value.medium {
      color: var(--accent-amber);
    }
    
    .progress-bar {
      height: 8px;
      background: var(--gray-200);
      border-radius: 4px;
      overflow: hidden;
      margin-bottom: 1rem;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--accent-green), var(--accent-teal));
      border-radius: 4px;
      transition: width 0.3s ease;
    }
    
    .progress-fill.low {
      background: linear-gradient(90deg, var(--primary-red), #f59e0b);
    }
    
    .card-details {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }
    
    .detail-item {
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
    }
    
    .detail-label {
      color: var(--gray-500);
      font-size: 0.75rem;
      font-weight: 500;
    }
    
    .detail-value {
      color: var(--gray-800);
      font-size: 0.875rem;
      font-weight: 600;
    }
    
    .card-actions {
      display: flex;
      gap: 0.75rem;
    }
    
    .card-btn {
      flex: 1;
      padding: 0.625rem 1rem;
      border-radius: 8px;
      border: 1px solid var(--gray-300);
      background: white;
      color: var(--gray-700);
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }
    
    .card-btn:hover {
      background: var(--gray-100);
      border-color: var(--gray-400);
    }
    
    .card-btn.primary {
      background: var(--primary-red);
      color: white;
      border-color: var(--primary-red);
    }
    
    .card-btn.primary:hover {
      background: #b91c1c;
    }
    
    /* Charts Panel */
    .charts-panel {
      background: white;
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: var(--shadow-md);
      border: 1px solid var(--gray-200);
      height: fit-content;
    }
    
    .chart-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
    }
    
    .chart-title {
      font-size: 1.125rem;
      color: var(--primary-dark);
      font-weight: 600;
    }
    
    .chart-legend {
      display: flex;
      gap: 1rem;
    }
    
    .legend-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.875rem;
      color: var(--gray-600);
    }
    
    .legend-color {
      width: 12px;
      height: 12px;
      border-radius: 50%;
    }
    
    /* Analytics Panels */
    .analytics-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }
    
    .analytics-panel {
      background: white;
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: var(--shadow-md);
      border: 1px solid var(--gray-200);
    }
    
    .panel-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
    }
    
    .panel-title {
      font-size: 1rem;
      color: var(--primary-dark);
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    /* Health Map */
    .health-map {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
      gap: 0.75rem;
    }
    
    .health-node {
      aspect-ratio: 1;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.25rem;
      color: white;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
    }
    
    .health-node:hover {
      transform: scale(1.1);
      box-shadow: var(--shadow-md);
    }
    
    .health-node-tooltip {
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%);
      background: var(--primary-dark);
      color: white;
      padding: 0.5rem 0.75rem;
      border-radius: 6px;
      font-size: 0.75rem;
      white-space: nowrap;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
      z-index: 10;
      margin-bottom: 0.5rem;
    }
    
    .health-node:hover .health-node-tooltip {
      opacity: 1;
      visibility: visible;
    }
    
    /* Anomaly Panel */
    .anomaly-list {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    
    .anomaly-item {
      display: flex;
      align-items: flex-start;
      gap: 1rem;
      padding: 1rem;
      background: #fff7ed;
      border-radius: 8px;
      border-left: 4px solid var(--accent-amber);
    }
    
    .anomaly-icon {
      color: var(--accent-amber);
      font-size: 1.25rem;
      flex-shrink: 0;
    }
    
    .anomaly-content {
      flex: 1;
    }
    
    .anomaly-title {
      font-weight: 600;
      color: var(--primary-dark);
      margin-bottom: 0.25rem;
    }
    
    .anomaly-desc {
      color: #92400e;
      font-size: 0.875rem;
    }
    
    /* Maintenance Calendar */
    .calendar-table {
      width: 100%;
      border-collapse: collapse;
    }
    
    .calendar-table th,
    .calendar-table td {
      padding: 0.75rem;
      text-align: left;
      border-bottom: 1px solid var(--gray-200);
    }
    
    .calendar-table th {
      font-weight: 600;
      color: var(--gray-700);
      background: var(--gray-50);
      font-size: 0.875rem;
    }
    
    .calendar-table tr:hover {
      background: var(--gray-50);
    }
    
    /* Report Generator */
    .report-generator {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    
    .report-input {
      padding: 0.75rem 1rem;
      border: 1px solid var(--gray-300);
      border-radius: 8px;
      font-family: inherit;
      font-size: 0.875rem;
      transition: all 0.3s;
    }
    
    .report-input:focus {
      outline: none;
      border-color: var(--primary-red);
      box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);
    }
    
    .report-results {
      max-height: 300px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }
    
    /* Modal */
    .modal-bg {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      z-index: 2000;
      align-items: center;
      justify-content: center;
      padding: 2rem;
    }
    
    .modal-main {
      background: white;
      max-width: 800px;
      width: 100%;
      border-radius: 16px;
      box-shadow: var(--shadow-xl);
      position: relative;
      animation: modalSlideIn 0.3s ease;
    }
    
    @keyframes modalSlideIn {
      from {
        opacity: 0;
        transform: translateY(-50px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .modal-close {
      background: none;
      border: none;
      font-size: 1.5rem;
      color: var(--gray-500);
      cursor: pointer;
      transition: color 0.3s;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      position: absolute;
      top: 1.5rem;
      right: 1.5rem;
    }
    
    .modal-close:hover {
      color: var(--primary-red);
      background: var(--gray-100);
    }
    
    .modal-content {
      padding: 2.5rem;
    }
    
    .modal-header {
      margin-bottom: 2rem;
    }
    
    .modal-title {
      font-size: 1.5rem;
      color: var(--primary-dark);
      margin-bottom: 0.5rem;
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    
    /* Responsive Design */
    @media (max-width: 1024px) {
      .container {
        padding: 0 1.5rem;
      }
      
      .nav-container {
        padding: 0 1.5rem;
      }
      
      .analytics-grid {
        grid-template-columns: 1fr;
      }
    }
    
    @media (max-width: 768px) {
      .mobile-menu-btn {
        display: block;
      }
      
      .nav-menu {
        position: fixed;
        top: 70px;
        left: 0;
        width: 100%;
        background: white;
        flex-direction: column;
        padding: 1.5rem;
        gap: 1rem;
        transform: translateY(-100%);
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
        box-shadow: var(--shadow-lg);
        z-index: 999;
      }
      
      .nav-menu.active {
        transform: translateY(0);
        opacity: 1;
        visibility: visible;
      }
      
      .dashboard-grid {
        grid-template-columns: 1fr;
      }
      
      .filter-panel {
        flex-direction: column;
        align-items: stretch;
        gap: 1rem;
      }
      
      .filter-group {
        width: 100%;
      }
      
      .title {
        font-size: 1.75rem;
      }
      
      .card-grid {
        grid-template-columns: 1fr;
      }
    }
    
    @media (max-width: 480px) {
      .container {
        padding: 0 1rem;
      }
      
      .nav-container {
        padding: 0 1rem;
      }
      
      .title {
        font-size: 1.5rem;
      }
      
      .summary-pane {
        grid-template-columns: 1fr;
      }
      
      .card-details {
        grid-template-columns: 1fr;
      }
      
      .modal-content {
        padding: 1.5rem;
      }
    }
    
    /* Animations */
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .fade-in {
      animation: fadeIn 0.5s ease forwards;
    }
  </style>
</head>
<body>
  <!-- Navigation -->
  <nav class="navbar">
    <div class="nav-container">
      <a href="#" class="logo">
        <i class="fas fa-chart-line logo-icon"></i>
        <span>Analytics Pro</span>
      </a>
      
      <button class="mobile-menu-btn">
        <i class="fas fa-bars"></i>
      </button>
      
      <ul class="nav-menu">
        <li><a href="#" class="nav-link"><i class="fas fa-home"></i> Dashboard</a></li>
        <li><a href="#" class="nav-link"><i class="fas fa-server"></i> Assets</a></li>
        <li><a href="#" class="nav-link"><i class="fas fa-chart-bar"></i> Analytics</a></li>
        <li><a href="#" class="nav-link"><i class="fas fa-cog"></i> Settings</a></li>
        <li><a href="#" class="nav-link"><i class="fas fa-bell"></i> Alerts</a></li>
      </ul>
    </div>
  </nav>

  <!-- Main Container -->
  <div class="container">
    <!-- Header -->
    <div class="header">
      <div class="header-content">
        <h1 class="title">Predictive Maintenance Dashboard</h1>
        <p class="subtitle">Monitor equipment health, predict failures, and optimize maintenance schedules</p>
      </div>
      <div class="header-actions">
        <button class="btn btn-secondary">
          <i class="fas fa-download"></i>
          Export
        </button>
        <button class="btn">
          <i class="fas fa-plus"></i>
          Add Asset
        </button>
      </div>
    </div>
    
    <!-- Filter Panel -->
    <div class="filter-panel">
      <div class="filter-group">
        <label class="filter-label">
          <i class="fas fa-filter"></i>
          Status Filter:
        </label>
        <select id="statusFilter">
          <option value="All">All Status</option>
          <option value="Running">Running</option>
          <option value="Idle">Idle</option>
          <option value="Maintenance">Under Maintenance</option>
        </select>
      </div>
      
      <div class="filter-group">
        <label class="filter-label">
          <i class="fas fa-search"></i>
          Quick Find:
        </label>
        <select id="idSelector"></select>
        <button id="loadIdBtn" class="btn-outline">Load Asset</button>
        <button id="showAllBtn" class="btn">Show All</button>
      </div>
    </div>
    
    <!-- Summary Metrics -->
    <div class="summary-pane">
      <div class="summary-item">
        <div class="summary-icon">
          <i class="fas fa-server"></i>
        </div>
        <div class="summary-content">
          <div class="summary-text">
            <div class="summary-label">Total Assets</div>
            <div class="summary-value" id="machines-monitored">0</div>
            <div class="summary-trend" id="machines-active"></div>
          </div>
        </div>
      </div>
      
      <div class="summary-item">
        <div class="summary-icon">
          <i class="fas fa-heart"></i>
        </div>
        <div class="summary-content">
          <div class="summary-text">
            <div class="summary-label">Avg. Health Score</div>
            <div class="summary-value" id="avg-health">0%</div>
            <div class="summary-trend">
              <i class="fas fa-arrow-up"></i>
              <span>2.5%</span>
            </div>
          </div>
        </div>
      </div>
      
      <div class="summary-item">
        <div class="summary-icon">
          <i class="fas fa-calendar-check"></i>
        </div>
        <div class="summary-content">
          <div class="summary-text">
            <div class="summary-label">Next Maintenance</div>
            <div class="summary-value" id="next-date">---</div>
            <div class="summary-label">7 days remaining</div>
          </div>
        </div>
      </div>
      
      <div class="summary-item">
        <div class="summary-icon">
          <i class="fas fa-exclamation-triangle"></i>
        </div>
        <div class="summary-content">
          <div class="summary-text">
            <div class="summary-label">Active Alerts</div>
            <div class="summary-value" id="anomalies">0</div>
            <div class="summary-trend down" id="anomaly-list">
              <i class="fas fa-arrow-down"></i>
              <span>Priority issues</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Analytics Dashboard -->
    <div class="dashboard-grid">
      <!-- Main Content -->
      <div class="main-content">
        <!-- Asset Grid -->
        <div class="card-grid" id="machineGrid"></div>
        
        <!-- Analytics Panels -->
        <div class="analytics-grid">
          <div class="analytics-panel">
            <div class="panel-header">
              <h3 class="panel-title">
                <i class="fas fa-map-marked-alt" style="color: var(--accent-purple);"></i>
                Asset Health Map
              </h3>
              <span class="badge">Live</span>
            </div>
            <div class="health-map" id="healthMap"></div>
          </div>
          
          <div class="analytics-panel">
            <div class="panel-header">
              <h3 class="panel-title">
                <i class="fas fa-exclamation-circle" style="color: var(--accent-amber);"></i>
                Active Alerts
              </h3>
              <span class="badge" id="alertCount">0</span>
            </div>
            <div class="anomaly-list" id="anomalyPanel"></div>
          </div>
        </div>
      </div>
      
      <!-- Sidebar -->
      <div class="charts-panel">
        <div class="chart-header">
          <h3 class="chart-title">Health Overview</h3>
          <div class="chart-legend">
            <div class="legend-item">
              <span class="legend-color" style="background: var(--accent-green);"></span>
              <span>Good</span>
            </div>
            <div class="legend-item">
              <span class="legend-color" style="background: var(--primary-red);"></span>
              <span>Attention</span>
            </div>
          </div>
        </div>
        <canvas id="healthChart"></canvas>
        
        <div style="margin-top: 2rem;">
          <div class="chart-header">
            <h3 class="chart-title">Maintenance Calendar</h3>
          </div>
          <div id="calendarTable"></div>
        </div>
        
        <div style="margin-top: 2rem;">
          <div class="chart-header">
            <h3 class="chart-title">Report Generator</h3>
          </div>
          <div class="report-generator">
            <input type="text" id="reportFilter" class="report-input" placeholder="Search by asset, status, or alert..." />
            <button onclick="generateReport()" class="btn" style="width: 100%;">
              <i class="fas fa-file-export"></i>
              Generate Report
            </button>
            <div id="reportResults" class="report-results"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal-bg" id="details-modal-bg">
    <div class="modal-main">
      <button class="modal-close" id="close-modal">&times;</button>
      <div class="modal-content" id="modal-content"></div>
    </div>
  </div>

  <script>
    // Mobile menu toggle
    const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
    const navMenu = document.querySelector('.nav-menu');
    
    mobileMenuBtn.addEventListener('click', () => {
      navMenu.classList.toggle('active');
      mobileMenuBtn.innerHTML = navMenu.classList.contains('active') 
        ? '<i class="fas fa-times"></i>' 
        : '<i class="fas fa-bars"></i>';
    });
    
    // Close mobile menu when clicking on a link
    document.querySelectorAll('.nav-link').forEach(link => {
      link.addEventListener('click', () => {
        navMenu.classList.remove('active');
        mobileMenuBtn.innerHTML = '<i class="fas fa-bars"></i>';
      });
    });
    
    // Navbar scroll effect
    window.addEventListener('scroll', () => {
      const navbar = document.querySelector('.navbar');
      if (window.scrollY > 50) {
        navbar.classList.add('scrolled');
      } else {
        navbar.classList.remove('scrolled');
      }
    });

    let machines = [];

    function loadMachines() {
      // Simulating API call with fallback data
      setTimeout(() => {
        machines = [
          { 
            id: 1, 
            name: "Google Data Center #1", 
            type: "Cooling System",
            status: "Running", 
            healthScore: 92, 
            nextMaintenance: "2025-12-15", 
            alert: null, 
            trend: [90,92,91,93,92],
            location: "Building A",
            uptime: "99.8%",
            lastInspection: "2025-10-15"
          },
          { 
            id: 7, 
            name: "Meta Compute Farm #12", 
            type: "Server Rack",
            status: "Running", 
            healthScore: 88, 
            nextMaintenance: "2025-12-18", 
            alert: null, 
            trend: [85,87,86,88,88],
            location: "Building C",
            uptime: "99.5%",
            lastInspection: "2025-10-20"
          },
          { 
            id: 2, 
            name: "Amazon EC2 Rack #3", 
            type: "Power Unit",
            status: "Running", 
            healthScore: 70, 
            nextMaintenance: "2025-11-25", 
            alert: "Temperature rising above threshold", 
            trend: [75,74,73,72,70],
            location: "Building B",
            uptime: "98.2%",
            lastInspection: "2025-10-10"
          },
          { 
            id: 3, 
            name: "Tesla GigaFactory Boiler #2", 
            type: "Heating System",
            status: "Idle", 
            healthScore: 60, 
            nextMaintenance: "2025-11-18", 
            alert: "Pressure fluctuation detected", 
            trend: [70,67,65,62,60],
            location: "Factory Floor",
            uptime: "95.5%",
            lastInspection: "2025-09-28"
          },
          { 
            id: 4, 
            name: "Microsoft Azure Washer Node #5", 
            type: "Cooling Unit",
            status: "Running", 
            healthScore: 82, 
            nextMaintenance: "2025-12-01", 
            alert: null, 
            trend: [80,82,81,82,82],
            location: "Data Hall 3",
            uptime: "99.1%",
            lastInspection: "2025-10-05"
          },
          { 
            id: 5, 
            name: "Apple Data Furnace #6", 
            type: "Processing Unit",
            status: "Idle", 
            healthScore: 55, 
            nextMaintenance: "2025-12-08", 
            alert: "Critical: Vibration levels critical", 
            trend: [60,62,59,57,55],
            location: "Building D",
            uptime: "92.8%",
            lastInspection: "2025-09-15"
          },
          { 
            id: 6, 
            name: "IBM Quantum Mixer #8", 
            type: "Specialized Equipment",
            status: "Running", 
            healthScore: 95, 
            nextMaintenance: "2026-01-05", 
            alert: null, 
            trend: [94,94,95,95,95],
            location: "Lab 2",
            uptime: "99.9%",
            lastInspection: "2025-10-25"
          }
        ];
        renderGrid(machines);
        updateSummary(machines);
        renderChart(machines);
        populateIdSelector();
        renderAdvancedSections(machines);
      }, 300);
    }

    function getHealthClass(score) {
      if (score >= 80) return 'good';
      if (score >= 60) return 'medium';
      return 'low';
    }
    
    function getAssetIcon(name) {
      if (name.includes('Google') || name.includes('Data Center')) return 'fas fa-database';
      if (name.includes('Amazon') || name.includes('EC2')) return 'fas fa-cloud';
      if (name.includes('Tesla') || name.includes('Boiler')) return 'fas fa-fire';
      if (name.includes('Microsoft') || name.includes('Azure')) return 'fas fa-server';
      if (name.includes('Apple') || name.includes('Furnace')) return 'fas fa-microchip';
      if (name.includes('IBM') || name.includes('Quantum')) return 'fas fa-atom';
      if (name.includes('Meta') || name.includes('Compute')) return 'fas fa-computer';
      return 'fas fa-industry';
    }
    
    function createMachineCard(machine, idx) {
      const healthClass = getHealthClass(machine.healthScore);
      const healthColor = machine.healthScore >= 80 ? 'var(--accent-green)' : 
                         machine.healthScore >= 60 ? 'var(--accent-amber)' : 
                         'var(--primary-red)';
      
      return `
        <div class="card${machine.alert ? ' alert' : ''} fade-in">
          <div class="card-header">
            <div class="card-icon">
              <i class="${getAssetIcon(machine.name)}"></i>
            </div>
            <div class="card-title-section">
              <div class="card-title">${machine.name}</div>
              <div class="card-subtitle">${machine.type} â€¢ ${machine.location}</div>
              <div class="card-badges">
                <span class="badge badge-status ${machine.status.toLowerCase()}">
                  <i class="fas fa-${machine.status === 'Running' ? 'play' : 'pause'}"></i>
                  ${machine.status}
                </span>
                <span class="badge badge-health">
                  <i class="fas fa-heart"></i>
                  Health: ${machine.healthScore}%
                </span>
              </div>
            </div>
          </div>
          
          <div class="health-score">
            <div class="health-label">Health Score</div>
            <div class="health-value ${healthClass}">${machine.healthScore}%</div>
          </div>
          
          <div class="progress-bar">
            <div class="progress-fill ${healthClass}" style="width: ${machine.healthScore}%"></div>
          </div>
          
          <div class="card-details">
            <div class="detail-item">
              <div class="detail-label">Next Maintenance</div>
              <div class="detail-value">${machine.nextMaintenance}</div>
            </div>
            <div class="detail-item">
              <div class="detail-label">Uptime</div>
              <div class="detail-value">${machine.uptime}</div>
            </div>
            <div class="detail-item">
              <div class="detail-label">Last Inspection</div>
              <div class="detail-value">${machine.lastInspection}</div>
            </div>
            <div class="detail-item">
              <div class="detail-label">Asset ID</div>
              <div class="detail-value">#${machine.id.toString().padStart(3, '0')}</div>
            </div>
          </div>
          
          ${machine.alert ? `
            <div class="anomaly-item" style="margin-bottom: 1rem;">
              <i class="anomaly-icon fas fa-exclamation-triangle"></i>
              <div class="anomaly-content">
                <div class="anomaly-title">Alert Detected</div>
                <div class="anomaly-desc">${machine.alert}</div>
              </div>
            </div>
          ` : ''}
          
          <div class="card-actions">
            <button class="card-btn" onclick="showDetails(${idx})">
              <i class="fas fa-chart-line"></i>
              Analytics
            </button>
            <button class="card-btn primary" onclick="showDetails(${idx})">
              <i class="fas fa-search"></i>
              View Details
            </button>
          </div>
        </div>
      `;
    }
    
    function updateSummary(arr) {
      document.getElementById('machines-monitored').textContent = arr.length;
      const running = arr.filter(m => m.status === 'Running').length;
      document.getElementById('machines-active').textContent = `${running} active`;
      
      const avgH = arr.length > 0 ? arr.reduce((sum, m) => sum + m.healthScore, 0) / arr.length : 0;
      document.getElementById('avg-health').textContent = Math.round(avgH) + '%';
      
      const dates = arr.map(m => new Date(m.nextMaintenance)).filter(d => !isNaN(d.getTime()));
      const nextDate = dates.length > 0 ? dates.sort((a, b) => a - b)[0] : null;
      document.getElementById('next-date').textContent = nextDate ? 
        nextDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' }) : '---';
      
      const anomalies = arr.filter(m => m.alert);
      document.getElementById('anomalies').textContent = anomalies.length;
      document.getElementById('alertCount').textContent = anomalies.length;
    }
    
    function renderGrid(arr) {
      document.getElementById('machineGrid').innerHTML = arr.map((machine, idx) => createMachineCard(machine, idx)).join('');
    }
    
    function filterMachines(status) {
      if (status === 'All') return machines;
      return machines.filter(m => m.status === status);
    }
    
    document.getElementById('statusFilter').onchange = e => {
      const filtered = filterMachines(e.target.value);
      renderGrid(filtered);
      updateSummary(filtered);
      renderChart(filtered);
      populateIdSelector(filtered);
      renderAdvancedSections(filtered);
    };
    
    function renderChart(arr) {
      const ctx = document.getElementById('healthChart').getContext('2d');
      const data = {
        labels: arr.map(m => m.name.split(' ')[0]),
        datasets: [{
          label: 'Health Score',
          data: arr.map(m => m.healthScore),
          backgroundColor: arr.map(m => {
            if (m.healthScore >= 80) return 'rgba(16, 185, 129, 0.7)';
            if (m.healthScore >= 60) return 'rgba(245, 158, 11, 0.7)';
            return 'rgba(220, 38, 38, 0.7)';
          }),
          borderColor: arr.map(m => {
            if (m.healthScore >= 80) return '#10b981';
            if (m.healthScore >= 60) return '#f59e0b';
            return '#dc2626';
          }),
          borderWidth: 1,
          borderRadius: 6,
          borderSkipped: false,
        }]
      };
      
      if (window._health_chart) window._health_chart.destroy();
      
      window._health_chart = new Chart(ctx, {
        type: 'bar',
        data,
        options: {
          responsive: true,
          maintainAspectRatio: true,
          plugins: { 
            legend: { display: false },
            tooltip: {
              backgroundColor: 'rgba(15, 23, 42, 0.95)',
              titleFont: { family: 'Poppins', size: 12 },
              bodyFont: { family: 'Inter', size: 11 },
              padding: 12,
              cornerRadius: 6,
              displayColors: false,
              callbacks: {
                label: function(context) {
                  const machine = arr[context.dataIndex];
                  return [
                    `Health: ${machine.healthScore}%`,
                    `Status: ${machine.status}`,
                    machine.alert ? `Alert: ${machine.alert}` : 'No alerts'
                  ];
                }
              }
            }
          },
          scales: { 
            y: { 
              beginAtZero: true, 
              max: 100,
              grid: { 
                color: 'rgba(226, 232, 240, 0.5)',
                drawBorder: false
              },
              ticks: { 
                font: { family: 'Inter', size: 11 },
                stepSize: 25
              }
            },
            x: {
              grid: { display: false },
              ticks: { 
                font: { family: 'Inter', size: 11 },
                maxRotation: 45
              }
            }
          }
        }
      });
    }
    
    window.showDetails = function(idx) {
      const arr = filterMachines(document.getElementById('statusFilter').value);
      const m = arr[idx];
      const modalBg = document.getElementById('details-modal-bg');
      const modal = document.getElementById('modal-content');
      
      const trendCtx = document.createElement('canvas');
      trendCtx.id = 'trendChart';
      trendCtx.height = 200;
      
      modal.innerHTML = `
        <div class="modal-header">
          <h2 class="modal-title">
            <i class="${getAssetIcon(m.name)}"></i>
            ${m.name}
          </h2>
          <span class="badge badge-status ${m.status.toLowerCase()}">${m.status}</span>
        </div>
        
        <div class="card-details" style="grid-template-columns: repeat(2, 1fr); margin-bottom: 2rem;">
          <div class="detail-item">
            <div class="detail-label">Asset Type</div>
            <div class="detail-value">${m.type}</div>
          </div>
          <div class="detail-item">
            <div class="detail-label">Location</div>
            <div class="detail-value">${m.location}</div>
          </div>
          <div class="detail-item">
            <div class="detail-label">Health Score</div>
            <div class="detail-value ${getHealthClass(m.healthScore)}">${m.healthScore}%</div>
          </div>
          <div class="detail-item">
            <div class="detail-label">Uptime</div>
            <div class="detail-value">${m.uptime}</div>
          </div>
          <div class="detail-item">
            <div class="detail-label">Next Maintenance</div>
            <div class="detail-value">${m.nextMaintenance}</div>
          </div>
          <div class="detail-item">
            <div class="detail-label">Last Inspection</div>
            <div class="detail-value">${m.lastInspection}</div>
          </div>
        </div>
        
        ${m.alert ? `
          <div class="anomaly-item" style="margin-bottom: 2rem;">
            <i class="anomaly-icon fas fa-exclamation-triangle"></i>
            <div class="anomaly-content">
              <div class="anomaly-title">Active Alert</div>
              <div class="anomaly-desc">${m.alert}</div>
            </div>
          </div>
        ` : ''}
        
        <h3 style="margin-bottom: 1rem; color: var(--primary-dark);">
          <i class="fas fa-chart-line"></i>
          Health Trend (Last 5 Weeks)
        </h3>
        <div style="height: 200px;">
          ${trendCtx.outerHTML}
        </div>
      `;
      
      modalBg.style.display = 'flex';
      
      setTimeout(() => {
        const ctx = document.getElementById('trendChart').getContext('2d');
        new Chart(ctx, {
          type: 'line',
          data: {
            labels: ['Week -4', 'Week -3', 'Week -2', 'Week -1', 'Current'],
            datasets: [{
              label: 'Health Score',
              data: m.trend,
              borderColor: '#dc2626',
              backgroundColor: 'rgba(220, 38, 38, 0.1)',
              tension: 0.4,
              fill: true,
              pointBackgroundColor: m.trend.map(score => {
                if (score >= 80) return '#10b981';
                if (score >= 60) return '#f59e0b';
                return '#dc2626';
              }),
              pointBorderColor: '#fff',
              pointBorderWidth: 2,
              pointRadius: 6
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: { 
              legend: { display: false },
              tooltip: {
                backgroundColor: 'rgba(15, 23, 42, 0.95)',
                titleFont: { family: 'Poppins' },
                bodyFont: { family: 'Inter' }
              }
            },
            scales: { 
              y: {
                beginAtZero: true, 
                max: 100,
                grid: { 
                  color: 'rgba(226, 232, 240, 0.5)',
                  drawBorder: false
                },
                ticks: { 
                  font: { family: 'Inter', size: 11 },
                  stepSize: 25
                }
              },
              x: {
                grid: { 
                  color: 'rgba(226, 232, 240, 0.5)',
                  drawBorder: false
                },
                ticks: { font: { family: 'Inter', size: 11 } }
              }
            }
          }
        });
      }, 100);
    };
    
    document.getElementById('close-modal').onclick = () =>
      document.getElementById('details-modal-bg').style.display = 'none';

    function populateIdSelector(arr = machines) {
      const selector = document.getElementById('idSelector');
      selector.innerHTML = `<option value="">Select Asset...</option>` +
        arr.map(m => `<option value="${m.id}">#${m.id.toString().padStart(3, '0')} - ${m.name}</option>`).join('');
    }
    
    document.getElementById('loadIdBtn').onclick = () => {
      const selectedId = parseInt(document.getElementById('idSelector').value, 10);
      if (!selectedId) return;
      
      const filtered = machines.filter(m => m.id === selectedId);
      if (filtered.length === 0) return;
      
      renderGrid(filtered);
      updateSummary(filtered);
      renderChart(filtered);
      renderAdvancedSections(filtered);
    };
    
    document.getElementById('showAllBtn').onclick = () => {
      renderGrid(machines);
      updateSummary(machines);
      renderChart(machines);
      document.getElementById('statusFilter').value = 'All';
      populateIdSelector(machines);
      renderAdvancedSections(machines);
    };

    // Advanced Panels
    function renderAdvancedSections(arr) {
      renderHealthMap(arr);
      renderAnomalyPanel(arr);
      renderMaintenanceCalendar(arr);
    }
    
    function renderHealthMap(arr) {
      const container = document.getElementById('healthMap');
      container.innerHTML = arr.map((a, i) => {
        const healthClass = getHealthClass(a.healthScore);
        const color = a.healthScore >= 80 ? '#10b981' : 
                     a.healthScore >= 60 ? '#f59e0b' : 
                     '#dc2626';
        
        return `
          <div class="health-node" style="background: ${color};" onclick="showDetails(${i})">
            <i class="${getAssetIcon(a.name)}"></i>
            <div class="health-node-tooltip">
              ${a.name}<br>
              Health: ${a.healthScore}%
            </div>
          </div>
        `;
      }).join('');
    }
    
    function renderAnomalyPanel(arr) {
      const anomalyArr = arr.filter(m => m.alert);
      const container = document.getElementById('anomalyPanel');
      
      if (anomalyArr.length === 0) {
        container.innerHTML = `
          <div style="text-align: center; padding: 2rem; color: var(--gray-400);">
            <i class="fas fa-check-circle" style="font-size: 2rem; margin-bottom: 1rem;"></i>
            <div>No active alerts</div>
            <div style="font-size: 0.875rem; margin-top: 0.5rem;">All systems operating normally</div>
          </div>
        `;
        return;
      }
      
      container.innerHTML = anomalyArr.map((a, i) => `
        <div class="anomaly-item" onclick="showDetails(${i})" style="cursor: pointer;">
          <i class="anomaly-icon fas fa-exclamation-triangle"></i>
          <div class="anomaly-content">
            <div class="anomaly-title">${a.name}</div>
            <div class="anomaly-desc">${a.alert}</div>
            <div style="display: flex; gap: 1rem; margin-top: 0.5rem;">
              <span style="font-size: 0.75rem; color: var(--gray-500);">
                <i class="fas fa-heart"></i> Health: ${a.healthScore}%
              </span>
              <span style="font-size: 0.75rem; color: var(--gray-500);">
                <i class="fas fa-calendar"></i> Due: ${a.nextMaintenance}
              </span>
            </div>
          </div>
        </div>
      `).join('');
    }
    
    function renderMaintenanceCalendar(arr) {
      const sorted = [...arr].sort((a, b) => new Date(a.nextMaintenance) - new Date(b.nextMaintenance));
      let html = `
        <table class="calendar-table">
          <thead>
            <tr>
              <th>Asset</th>
              <th>Due Date</th>
              <th>Health</th>
              <th>Priority</th>
            </tr>
          </thead>
          <tbody>
            ${sorted.map((m, i) => {
              const daysUntil = Math.ceil((new Date(m.nextMaintenance) - new Date()) / (1000 * 60 * 60 * 24));
              let priority = 'Low';
              let priorityColor = '#10b981';
              
              if (daysUntil <= 7) {
                priority = 'High';
                priorityColor = '#dc2626';
              } else if (daysUntil <= 30) {
                priority = 'Medium';
                priorityColor = '#f59e0b';
              }
              
              return `
                <tr onclick="showDetails(${i})" style="cursor: pointer;">
                  <td>
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                      <i class="${getAssetIcon(m.name)}" style="color: var(--gray-400);"></i>
                      ${m.name.split(' ')[0]}
                    </div>
                  </td>
                  <td>${m.nextMaintenance}</td>
                  <td>
                    <span style="color:${m.healthScore >= 80 ? '#10b981' : m.healthScore >= 60 ? '#f59e0b' : '#dc2626'}; font-weight: 600;">
                      ${m.healthScore}%
                    </span>
                  </td>
                  <td>
                    <span style="color: ${priorityColor}; font-weight: 600;">
                      ${priority}
                    </span>
                  </td>
                </tr>
              `;
            }).join('')}
          </tbody>
        </table>`;
      document.getElementById('calendarTable').innerHTML = html;
    }
    
    function generateReport() {
      const filter = document.getElementById('reportFilter').value.trim().toLowerCase();
      let filtered = machines;
      
      if (filter.length) {
        filtered = machines.filter(m =>
          m.name.toLowerCase().includes(filter) ||
          m.type.toLowerCase().includes(filter) ||
          (m.status && m.status.toLowerCase().includes(filter)) ||
          (m.alert && m.alert.toLowerCase().includes(filter))
        );
      }
      
      const container = document.getElementById('reportResults');
      
      if (filtered.length === 0) {
        container.innerHTML = `
          <div style="text-align: center; padding: 2rem; color: var(--gray-400);">
            <i class="fas fa-search" style="font-size: 1.5rem; margin-bottom: 1rem;"></i>
            <div>No matching assets found</div>
            <div style="font-size: 0.875rem; margin-top: 0.5rem;">Try a different search term</div>
          </div>
        `;
        return;
      }
      
      container.innerHTML = filtered.map(m => `
        <div class="card" style="padding: 1rem;">
          <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.75rem;">
            <div class="card-icon" style="width: 36px; height: 36px; font-size: 1rem;">
              <i class="${getAssetIcon(m.name)}"></i>
            </div>
            <div style="flex: 1;">
              <div style="font-weight: 600; color: var(--primary-dark);">${m.name}</div>
              <div style="font-size: 0.875rem; color: var(--gray-500);">${m.type}</div>
            </div>
            <span class="badge badge-status ${m.status.toLowerCase()}">${m.status}</span>
          </div>
          
          <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.5rem; margin-bottom: 0.75rem;">
            <div>
              <div style="font-size: 0.75rem; color: var(--gray-500);">Health</div>
              <div style="font-weight: 600; color: ${m.healthScore >= 80 ? '#10b981' : m.healthScore >= 60 ? '#f59e0b' : '#dc2626'}">
                ${m.healthScore}%
              </div>
            </div>
            <div>
              <div style="font-size: 0.75rem; color: var(--gray-500);">Next Maint.</div>
              <div style="font-weight: 600;">${m.nextMaintenance}</div>
            </div>
          </div>
          
          ${m.alert ? `
            <div style="background: #fff7ed; padding: 0.5rem; border-radius: 6px; font-size: 0.875rem; color: #92400e;">
              <i class="fas fa-exclamation-triangle"></i> ${m.alert}
            </div>
          ` : ''}
        </div>
      `).join('');
    }

    // Initial load
    loadMachines();
    
    // Close modal when clicking outside
    document.addEventListener('click', (e) => {
      const modalBg = document.getElementById('details-modal-bg');
      if (e.target === modalBg) {
        modalBg.style.display = 'none';
      }
    });
    
    // Close modal with Escape key
    document.addEventListener('keydown', (e) => {
      const modalBg = document.getElementById('details-modal-bg');
      if (e.key === 'Escape' && modalBg.style.display === 'flex') {
        modalBg.style.display = 'none';
      }
    });
    
    // Animate elements on scroll
    window.addEventListener('load', () => {
      const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
      };
      
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.style.opacity = '1';
            entry.target.style.transform = 'translateY(0)';
          }
        });
      }, observerOptions);
      
      // Observe all animated elements
      document.querySelectorAll('.summary-item, .analytics-panel, .card').forEach(el => {
        el.style.opacity = '0';
        el.style.transform = 'translateY(20px)';
        el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        observer.observe(el);
      });
    });
    
    // Add loading animation
    document.addEventListener('DOMContentLoaded', () => {
      document.body.style.opacity = '0';
      setTimeout(() => {
        document.body.style.transition = 'opacity 0.5s ease';
        document.body.style.opacity = '1';
      }, 100);
    });
  </script>
</body>
</html>